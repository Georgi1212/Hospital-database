SET SCHEMA FN72039;

INSERT INTO STAFF(ID, NAME, POSITION, TELEPHONENUMBER, EMAIL, SALARY, DIRECTORHOSPITAL,
                  CHIEFNURSE, HEADOFDEPARTMENT, DEPARTMENTNAME)
VALUES ('1IIVANOV01', 'IVAN IVANOV', 'DOCTOR', '0897963214', 'iivanov01@testmed.bg', '5000', NULL, NULL, NULL, 'ANASTEZIOLOGIQ'),
       ('1DDIMITV02', 'DIMITUR DIMITROV', 'DOCTOR', '0897864214', 'ddimitv02@testmed.bg', '5000', NULL, NULL, '1', 'SUDOVA HIRURGIQ'),
       ('1GIVANOV03', 'GERGANA IVANOVA', 'DOCTOR', '0887545556', 'givanov03@testmed.bg', '5000', NULL, NULL, '1', 'KARDIOLOGIQ'),
       ('1MKUNCHV04', 'MARTIN KUNCHEV', 'DOCTOR', '0887676556', 'mkunchv04@testmed.bg', '5000', NULL, NULL, '1', 'DETSKI BOLESTI'),
       ('1PPAVLOV05', 'PETUR PAVLOV', 'DOCTOR', '0877562318', 'ppavlov05@testmed.bg', '5000', NULL, NULL, '1', 'OFTALMOLOGIQ'),
       ('1SDIMITV06', 'SVETLIN DIMITROV', 'DOCTOR', '0889654236', 'sdimitv06@testmed.bg', '5000', NULL, NULL, '1', 'PULMOLOGIQ'),
       ('1MTSEKOV07', 'MIHAIL TSEKOV', 'DOCTOR', '0877451629', 'mtsekov07@testmed.bg', '5000', NULL, NULL, '1', 'GASTROENTOROLOGIQ'),
       ('1BHRISTV08', 'BORIS HRISTOV', 'DOCTOR', '0877651968', 'bhristv08@testmed.bg', '5000', NULL, NULL, '1', 'KL. LABORATORIQ'),
       ('1ABORISV09', 'ALEKSANDUR BORISOV', 'DOCTOR', '0878963422', 'aborisv09@testmed.bg', '5000', NULL, NULL, '1', 'UROLOGIQ'),
       ('1VPETROV10', 'VASIL PETROV', 'DOCTOR', '0877569326','vpetrov10@testmed.bg', '5000', NULL, NULL, '1', 'HEMATOLOGIQ'),
       ('2KDUNEVA21', 'KRISTINA DUNEVA', 'NURSE', '0877343278', 'kduneva21@testmed.bg', '3000', NULL, '1', NULL,NULL),
       ('3IIVANOV31', 'IVAN IVANOV', 'SANITARIAN', '0889963214', 'iivanov31@testmed.bg', '2000', NULL, NULL, NULL, NULL),
       ('4DIVANOV41', 'DENITSA IVANOVA', 'REGISTRY', '0889763214', 'divanov41@testmed.bg', '2500', NULL, NULL, NULL, NULL),
       ('5JALKSDR51', 'JORDAN ALEKSANDROV', 'SEO', '0897968666', 'jalksndrv@testmed.bg', '9000', '1', NULL, NULL, NULL);

INSERT INTO STAFF(ID, NAME, POSITION, TELEPHONENUMBER, EMAIL, SALARY, DIRECTORHOSPITAL,
                  CHIEFNURSE, HEADOFDEPARTMENT, DEPARTMENTNAME)
VALUES ('1PTODORV05', 'PAVLIN TODOROV', 'DOCTOR', '0877416213', 'ptodotv05@testmed.bg', '5000', NULL, NULL, NULL, 'OFTALMOLOGIQ');


INSERT INTO HOSPITALDEPARTMENTS(NAME, HEADDOCTORID)
VALUES ('ANASTEZIOLOGIQ', '1NPETROV01'),
       ('SUDOVA HIRURGIQ', '1DDIMITV02'),
       ('KARDIOLOGIQ', '1GIVANOV03'),
       ('DETSKI BOLESTI', '1MKUNCHV04'),
       ('OFTALMOLOGIQ', '1PPAVLOV05'),
       ('PULMOLOGIQ', '1SDIMITV06'),
       ('GASTROENTOROLOGIQ', '1MTSEKOV07'),
       ('KL. LABORATORIQ', '1BHRISTV08'),
       ('UROLOGIQ', '1ABORISV09'),
       ('HEMATOLOGIQ', '1VPETROV10');

INSERT INTO HOSPITALPATIENTSROOMS(PATIENTSROOMNUMBER, DEPARTMENTNAME, NUMBERBEDS, NUMBERFREEBEDS)
VALUES ('10209', 'SUDOVA HIRURGIQ', '3', '2'),
       ('20306', 'KARDIOLOGIQ', '4', '0'),
       ('20415', 'DETSKI BOLESTI', '4', '2'),
       ('30509', 'OFTALMOLOGIQ', '3', '2'),
       ('30612', 'PULMOLOGIQ', '3', '1'),
       ('30613', 'PULMOLOGIQ', '3', '0'),
       ('40708', 'GASTROENTOROLOGIQ', '4', '2'),
       ('50910', 'UROLOGIQ', '4', '2'),
       ('51012', 'HEMATOLOGIQ', '3', '0');

INSERT INTO HOSPITALOFFICE(OFFICENUMBER, DEPARTMENTNAME, BUSY, IDSTAFF)
VALUES ('10203', 'SUDOVA HIRURGIQ', '0', '1DDIMITV02'),
       ('20301', 'KARDIOLOGIQ', NULL, '1GIVANOV03'),
       ('20404', 'DETSKI BOLESTI', '1', '1MKUNCHV04'),
       ('30504', 'OFTALMOLOGIQ', '0', '1PTODORV05'),
       ('30605', 'PULMOLOGIQ', '1', '1SDIMITV06'),
       ('40705', 'GASTROENTOROLOGIQ', NULL, '1MTSEKOV07'),
       ('40804', 'KL. LABORATORIQ', '1', '1BHRISTV08'),
       ('50902', 'UROLOGIQ', '1', '1ABORISV09'),
       ('51004', 'HEMATOLOGIQ', '0', '1VPETROV10');

INSERT INTO PATIENTS(EGN, NAME, GENDER, ADDRESS, TELEPHONENUMBER, HEALTHINSURED, TELK)
VALUES ('6302154584', 'TODOR PETROV', 'M', 'LULIN 5, SOFIA', '0877456321', '1', '0'),
       ('5506257894', 'ILIAN IVANOV', 'M', 'DRUJBA 6, SOFIA', '0879653210', '0', '0'),
       ('7412125623', 'TSVETELINA OGNQNOVA','F', 'UL. ISKUR 5, SOFIA', '0896541236', '1', '0'),
       ('4905061889', 'ROSITSA DIMITROVA', 'F', 'UL. TSAR SAMUIL 5 BURGAS', '0878956312', '1', '1'),
       ('5806162378', 'GRIGOR SPASOV', 'M', 'UL. LEDENIKA 6 PLOVDIV', '0896362145', '0', '1'),
       ('8206091885', 'IVAN TSVETKOV', 'M', 'M. LIVADI 3 SOFIA', '0887562211', '1', '0'),
       ('9303036654', 'MARTIN HRISTOV', 'M', 'UL. KIRIL I METODII 6 VRATSA', '0877566315', '1', '0'),
       ('8606268486', 'VENETA ILIEVA', 'F', 'OVCHA KUPEL 5 SOFIA', '0877456321', '0', '0'),
       ('8903045614', 'MARIQ GEORGIEVA', 'F', 'UL. ARDA 1 VIDIN', '0889631279', '1', '0');

INSERT INTO PATIENTS_HOSPITAL_SERVICE(EGN, DATEARRIVAL, TIMEARRIVAL, PURPOSEVISIT, OFFICENUMBER,
            PRICEOFSERVICE, DOCTORID, REGISTRYSTAFFID, PATIENTS_ROOM_NUMBER, DEPARTMENT_NAME)
VALUES ('6302154584', '2020-09-30', '15:10:00', 'PREGLED', '10203', '0', '1DDIMITV02', '4DIVANOV41', NULL, 'SUDOVA HIRURGIQ'),
       ('6302154584', '2021-07-09', '11:30:00', 'PREGLED', '10203', '0', '1DDIMITV02', '4DIVANOV41', NULL, 'SUDOVA HIRURGIQ'),
       ('5506257894', '2021-08-08', '08:15:00', 'OPERACIQ', '20301', '550', '1GIVANOV03', '4DIVANOV41', '20306', 'KARDIOLOGIQ'),
       ('7412125623', '2022-01-04', '11:00:00', 'PREGLED', '30504', '0', '1PTODORV05', '4DIVANOV41', NULL, 'OFTALMOLOGIQ'),
       ('4905061889', '2022-03-02', '15:15:00', 'BOL. LECHENIE', '30605','0', '1SDIMITV06', '4DIVANOV41', '30612', 'PULMOLOGIQ'),
       ('5806162378', '2021-06-05', '10:35:00', 'OPERACIQ', '40705', '360', '1MTSEKOV07', '4DIVANOV41', '40708', 'GASTROENTOROLOGIQ'),
       ('9303036654', '2022-04-04', '09:30:00', 'OPERACIQ', '50902', '250', '1ABORISV09', '4DIVANOV41', '50910', 'UROLOGIQ'),
       ('9303036654', '2022-06-04', '10:15:00', 'BOL. LECH.', '50902', '100', '1ABORISV09', '4DIVANOV41', '50910', 'UROLOGIQ'),
       ('8606268486', '2021-12-12', '15:20:00', 'OPERACIQ', '20301', '550', '1GIVANOV03', '4DIVANOV41', '20306', 'KARDIOLOGIQ'),
       ('8903045614', '2022-03-04', '10:25:00', 'PREGLED', '51004', '50', '1VPETROV10', '4DIVANOV41', NULL, 'HEMATOLOGIQ');

INSERT INTO HISTORYOFPROCEDURES(EGN, DATEPROCEDURE, TYPEOFPROCEDURE, RESULTOFPROCESURES, DIAGNOSISNAME)
VALUES ('6302154584', '2020-09-30', 'PREGLED', 'KL. ZDRAV', 'NQMA'),
       ('6302154584', '2021-07-09', 'PREGLED', 'KL. ZDRAV', 'NQMA'),
       ('5506257894', '2021-08-08', 'OPERACIQ', 'STENT', 'INFARKT'),
       ('7412125623', '2022-01-04', 'PREGLED', 'KL. ZDRAV', 'KUSOGLEDSTVO'),
       ('4905061889', '2022-03-02', 'BOL. LECH.', 'NQMA','ASTMA'),
       ('5806162378', '2021-06-05', 'OPERACIQ', 'NQMA', 'QZVA'),
       ('9303036654', '2022-04-04', 'OPERACIQ', 'PR. KAMUK', 'KAMUK V BUBREC'),
       ('9303036654', '2022-06-04', 'BOL. LECH.', 'KL.ZDRAV', 'CISTIT'),
       ('8606268486', '2021-12-12', 'OPERACIQ', 'STENT', 'INFARKT'),
       ('8903045614', '2022-03-04', 'PREGLED', 'KR. ZDRAV', 'NQMA');

INSERT INTO CLEANS(SANITARIANID, DEPARTMENTNAME)
VALUES('3IIVANOV31', 'UROLOGIQ');

INSERT INTO GOTHROUGH(NURSEID, DEPARTMENT_NAME, PATIENTS_ROOM_NUMBER)
VALUES ('2KDUNEVA21', 'KARDIOLOGIQ', '20306');

INSERT INTO HELPS(SANITARIANID, PATIENTEGN)
VALUES ('3IIVANOV31', '6302154584');

INSERT INTO TAKINGCAREOF(NURSEID, PATIENTEGN)
VALUES ('2KDUNEVA21', '5506257894');



/*
Изглед, които ни дава информация за ЕГН-то и името на пациентите
и дава информация за номера на болничната стая, в която лежат.
*/
CREATE VIEW V_PAT_ROOM
AS
SELECT P.NAME, P.EGN, PS.PATIENTS_ROOM_NUMBER
FROM PATIENTS P, PATIENTS_HOSPITAL_SERVICE PS, HOSPITALPATIENTSROOMS HR
WHERE PS.PATIENTS_ROOM_NUMBER = HR.PATIENTSROOMNUMBER
AND PS.DEPARTMENT_NAME = HR.DEPARTMENTNAME
AND PS.EGN = P.EGN;

SELECT * FROM V_PAT_ROOM;


/*
Изглед, който ни дава информация за номера на кабинентите и
имената на отделенията, в които се намират.
 */
CREATE VIEW V_PAT_ROOM_DEPT
AS
SELECT HR.PATIENTSROOMNUMBER, D.NAME
FROM HOSPITALDEPARTMENTS D, HOSPITALPATIENTSROOMS HR
WHERE D.NAME = HR.DEPARTMENTNAME;

SELECT * FROM V_PAT_ROOM_DEPT;


/*
Изглед, който ни дава информация за имената на отделенията и
броя свободни легла в съответното отделение.
 */
CREATE VIEW V_FREE_ROOM_DEPT
AS
SELECT D.NAME, HR.NUMBERFREEBEDS
FROM HOSPITALDEPARTMENTS D, HOSPITALPATIENTSROOMS HR
WHERE D.NAME = HR.DEPARTMENTNAME;

SELECT * FROM V_FREE_ROOM_DEPT;